/* ═══════════════════════════════════════════════════════════════
   NEON ARENA – style.css
   Reset → Tokens → Layout → Canvas → Accessibilité → Utilitaires
   ═══════════════════════════════════════════════════════════════ */

/* ─── 1. Reset moderne ───────────────────────────────────────── */
*, *::before, *::after {
  box-sizing: border-box;
  margin:     0;
  padding:    0;
}

/* ─── 2. Design tokens (variables CSS) ───────────────────────── */
:root {
  /* Couleurs */
  --color-bg:          #0a001f;
  --color-bg-dark:     #06000f;
  --color-cyan:        #00ffff;
  --color-magenta:     #ff00ff;
  --color-pink:        #ff0066;
  --color-white:       #ffffff;
  --color-muted:       rgba(255, 255, 255, 0.35);

  /* Typographie */
  --font-game:         'Orbitron', 'Arial Black', sans-serif;
  --font-ui:           'Orbitron', Arial, sans-serif;

  /* Glow */
  --glow-cyan:         0 0 12px var(--color-cyan),
                       0 0 28px var(--color-cyan);
  --glow-pink:         0 0 12px var(--color-pink),
                       0 0 28px var(--color-pink);
  --glow-magenta:      0 0 12px var(--color-magenta),
                       0 0 28px var(--color-magenta);

  /* Transitions */
  --transition-fast:   120ms ease;
  --transition-base:   250ms ease;
}

/* ─── 3. Base HTML & Body ────────────────────────────────────── */
html {
  height:                   100%;
  /* Lisse le rendu des fontes sur macOS / iOS */
  -webkit-font-smoothing:   antialiased;
  -moz-osx-font-smoothing:  grayscale;
  /* Empêche le zoom tactile sur iOS */
  -webkit-text-size-adjust: 100%;
  text-size-adjust:         100%;
}

body {
  height:       100%;
  overflow:     hidden;
  background:   var(--color-bg);
  font-family:  var(--font-ui);
  color:        var(--color-white);
  /* Interdit la sélection de texte (jeu tactile) */
  user-select:         none;
  -webkit-user-select: none;
  /* Désactive le menu contextuel long-press sur mobile */
  -webkit-touch-callout: none;
  /* Supprime le highlight bleu au tap sur Android */
  -webkit-tap-highlight-color: transparent;
}

/* ─── 4. Conteneur Phaser ────────────────────────────────────── */
#game-container {
  position: relative;
  width:    100%;
  height:   100%;
  display:  flex;
  align-items:     center;
  justify-content: center;
  /* Isole le contexte de stacking */
  isolation: isolate;
}

/* Canvas généré par Phaser */
#game-container canvas {
  display:    block;
  /* Rend les pixels nets sur les écrans retina */
  image-rendering: pixelated;
  image-rendering: crisp-edges;   /* Firefox */
  /* Ombre globale subtile */
  box-shadow: 0 0 60px rgba(0, 255, 255, 0.08),
              0 0 120px rgba(255, 0, 255, 0.05);
  /* Arrondi optionnel sur desktop */
  border-radius: 4px;
}

/* ─── 5. Loader (défini aussi en inline dans index.html) ─────── */
#loader {
  position:        fixed;
  inset:           0;
  display:         flex;
  flex-direction:  column;
  align-items:     center;
  justify-content: center;
  gap:             24px;
  background:      var(--color-bg);
  z-index:         999;
  transition:      opacity 0.5s var(--transition-base);
}

#loader.hidden {
  opacity:        0;
  pointer-events: none;
}

#loader-title {
  font-family:   var(--font-game);
  font-size:     clamp(28px, 6vw, 56px);
  font-weight:   900;
  color:         var(--color-cyan);
  text-shadow:   var(--glow-cyan), 0 0 60px var(--color-magenta);
  letter-spacing: 6px;
  text-transform: uppercase;
}

#loader-ring {
  width:        52px;
  height:       52px;
  border:       3px solid rgba(0, 255, 255, 0.12);
  border-top-color: var(--color-cyan);
  border-radius: 50%;
  animation:    spin 0.9s linear infinite;
  box-shadow:   var(--glow-cyan);
}

#loader-label {
  font-family:    var(--font-ui);
  font-size:      12px;
  color:          var(--color-muted);
  letter-spacing: 4px;
  text-transform: uppercase;
}

/* ─── 6. Animations ──────────────────────────────────────────── */
@keyframes spin {
  to { transform: rotate(360deg); }
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(8px); }
  to   { opacity: 1; transform: translateY(0);   }
}

@keyframes pulse-glow {
  0%, 100% { text-shadow: var(--glow-cyan); }
  50%       { text-shadow: var(--glow-magenta); }
}

/* ─── 7. Accessibilité ───────────────────────────────────────── */

/* Focus visible uniquement au clavier (pas au clic) */
:focus-visible {
  outline:        2px solid var(--color-cyan);
  outline-offset: 3px;
}

/* Respect du mode "réduction de mouvement" */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration:   1ms !important;
    transition-duration:  1ms !important;
  }
}

/* ─── 8. Responsive – petits écrans ─────────────────────────── */
@media (max-width: 480px) {
  #loader-title {
    font-size:      clamp(22px, 8vw, 36px);
    letter-spacing: 3px;
  }

  #loader-ring {
    width:  40px;
    height: 40px;
  }
}

/* ─── 9. Classes utilitaires ─────────────────────────────────── */
.visually-hidden {
  position:   absolute;
  width:      1px;
  height:     1px;
  padding:    0;
  margin:     -1px;
  overflow:   hidden;
  clip:       rect(0, 0, 0, 0);
  white-space: nowrap;
  border:     0;
}

.fade-in {
  animation: fadeIn var(--transition-base) both;
}

.glow-cyan    { text-shadow: var(--glow-cyan);    }
.glow-pink    { text-shadow: var(--glow-pink);    }
.glow-magenta { text-shadow: var(--glow-magenta); }
